var myGamePiece,myObstacles=[],myScore;function startGame(){myGamePiece=new component(30,30,"red",10,120);myGamePiece.gravity=.05;myScore=new component("30px","Consolas","black",280,40,"text");myGameArea.start()}
var myGameArea={canvas:document.createElement("canvas"),start:function(){this.canvas.width=480;this.canvas.height=270;this.context=this.canvas.getContext("2d");document.body.insertBefore(this.canvas,document.body.childNodes[0]);this.frameNo=0;this.interval=setInterval(updateGameArea,20)},clear:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}};
function component(a,b,c,d,e,f){this.type=f;this.score=0;this.width=a;this.height=b;this.speedY=this.speedX=0;this.x=d;this.y=e;this.gravitySpeed=this.gravity=0;this.update=function(){ctx=myGameArea.context;"text"==this.type?(ctx.font=this.width+" "+this.height,ctx.fillStyle=c,ctx.fillText(this.text,this.x,this.y)):(ctx.fillStyle=c,ctx.fillRect(this.x,this.y,this.width,this.height))};this.newPos=function(){this.gravitySpeed+=this.gravity;this.x+=this.speedX;this.y+=this.speedY+this.gravitySpeed;this.hitBottom()};
this.hitBottom=function(){var a=myGameArea.canvas.height-this.height;this.y>a&&(this.y=a,this.gravitySpeed=0)};this.crashWith=function(a){var b=this.x,c=this.x+this.width,d=this.y,e=a.x,f=a.x+a.width,h=a.y+a.height,g=!0;if(this.y+this.height<a.y||d>h||c<e||b>f)g=!1;return g}}
function updateGameArea(){var a,b,c;for(i=0;i<myObstacles.length;i+=1)if(myGamePiece.crashWith(myObstacles[i]))return;myGameArea.clear();myGameArea.frameNo+=1;if(1==myGameArea.frameNo||everyinterval(150))a=myGameArea.canvas.width,b=Math.floor(181*Math.random()+20),c=Math.floor(151*Math.random()+50),myObstacles.push(new component(10,b,"green",a,0)),myObstacles.push(new component(10,a-b-c,"green",a,b+c));for(i=0;i<myObstacles.length;i+=1)myObstacles[i].x+=-1,myObstacles[i].update();myScore.text="SCORE: "+
myGameArea.frameNo;myScore.update();myGamePiece.newPos();myGamePiece.update()}function everyinterval(a){return 0==myGameArea.frameNo/a%1?!0:!1}function accelerate(a){myGamePiece.gravity=a};
